"use strict";(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[5802],{80195:function(e,t){t.Z={src:"/_next/static/media/img-blank.bb695736.svg",height:120,width:80,blurWidth:0,blurHeight:0}},69551:function(e,t,s){s.d(t,{Z:function(){return d}});var n=s(36734),l=s(20150),a=s.n(l);s(51776);var i=s(86880),r=s(75141),o=s(33906),c=s(88910);function d(e){let{t}=(0,i.Z)(),{title:s,description:l,ogTitle:d,ogImage:m,ogDescription:x,schema:u,metaRobots:h,ogUrl:p,ogType:v}=e;t("seo:titleSuffix");let f=t("seo:defaultTitle"),g=c.EZ.SITE_URL,j=(0,o.useRouter)(),b=g+j.asPath;return(0,n.jsxs)(a(),{children:[s?(0,n.jsx)("title",{children:s||f}):(0,n.jsx)("title",{children:f}),l&&(0,n.jsx)("meta",{name:"description",content:(0,r.Vt)(l)}),d&&(0,n.jsx)("meta",{property:"og:title",content:d}),m&&(0,n.jsx)("meta",{property:"og:image",content:m}),p&&(0,n.jsx)("meta",{property:"og:url",content:p}),x&&(0,n.jsx)("meta",{property:"og:description",content:(0,r.Vt)(x)}),v&&(0,n.jsx)("meta",{property:"og:type",content:v}),h&&(0,n.jsx)("meta",{name:"robots",content:h}),(0,n.jsx)("link",{rel:"canonical",href:b}),u&&(0,n.jsx)("script",{type:"application/ld+json",children:JSON.stringify(u)})]})}},2938:function(e,t,s){s.d(t,{Z:function(){return $}});var n=s(36734),l=s(25552),a=s(44234),i=s(12792),r=s(4164),o=s(86880),c=s(3713),d=s.n(c),m=s(25404),x=s(51776),u=s(94195),h=s.n(u),p=s(92560),v=s(11741),f=s(37654),g=s.n(f),j=s(88910),b=s(44155),y=s.n(b),N=s(31720),k=s(42072),A=s(13891),w=s.n(A),S=s(92500),C=s(75141);function G(){let{t:e}=(0,o.Z)(),{quote:t,saveQuote:s,validQuote:l}=(0,i.bN)(),[a,r]=(0,x.useState)(0),[c,d]=(0,x.useState)(Date.now());(0,x.useEffect)(()=>{var e;d(null==t?void 0:null===(e=t.expiredAt)||void 0===e?void 0:e.getTime()),r(a+1)},[t.expiredAt]);let m=(e,s)=>{s||k.O2.emit("cancelOrder",t.userSessionId)},u=t=>{let{minutes:s,seconds:l,completed:a}=t;return a?(0,n.jsx)(n.Fragment,{}):(0,n.jsx)(n.Fragment,{children:(0,n.jsxs)("div",{className:"flex justify-center items-center mb-4",children:[(0,n.jsxs)("span",{className:"text-sm",children:[e("booking:holdingTime"),":"]}),(0,n.jsxs)("span",{className:"text-primary text-base font-bold ml-1",children:[(0,C.Bu)(s,2),":",(0,C.Bu)(l,2)]})]})})};return(0,n.jsx)(n.Fragment,{children:l()&&c&&(0,n.jsx)(S.ZP,{date:c,renderer:u,onComplete:(e,t)=>m(e,t)},a)})}var D=s(80195),I=s(33906),Z=s(11804),O=s.n(Z),V=s(82327),P=s.n(V),E=s(56683),M=s(27280),R=s.n(M),F={src:"/_next/static/media/delete.addc939e.png",height:512,width:512,blurDataURL:"data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAgAAAAICAQAAABuBnYAAAAAHUlEQVR42mPABCxoEBOsYNjEsAECgawVGAJkGAoA8bILKeQMtxMAAAAASUVORK5CYII=",blurWidth:8,blurHeight:8},L=s(67832),U=s.n(L),T=s(48196),B=s(34904),q=s.n(B),Y=s(21818),_={src:"/_next/static/media/icon-success.c42e4e43.png",height:683,width:627,blurDataURL:"data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAcAAAAICAYAAAA1BOUGAAAA3UlEQVR42mNYcm7V4qknZ/zff/toLAM6mHZqxv+JFxr+9+9b9JLPdOk+Xu/ZFxjc57XG+U3gYthyZWfzlMPz/mS0Lv/f7t/6f2Jsy385j9n/Gex7JzKAQKJL45oF4fX/J8R1/e6J6fm5IL72f314TT1Ijj2zrKvTxb/5m4FO/n8Tk+L/+halPxkYXGUZQGDn3hMtpfVT/04OZvg/PZThX2Fl3/9XH341wB0mn7LuhmvSov8OcQv+uxZuevX9y6ckhrkrjjODJJtnHJ7SMevI/46Zh/839m6dy8DAwAAAAl5mpouKItwAAAAASUVORK5CYII=",blurWidth:7,blurHeight:8},J={src:"/_next/static/media/Line.c026ce35.png",height:2,width:280,blurDataURL:"data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAgAAAABCAQAAABJCSfIAAAAFklEQVR42mPYN3nflH1T9k6G0PsmAwBaVwqMBj4p7wAAAABJRU5ErkJggg==",blurWidth:8,blurHeight:1},H=s(25585);let Q=(0,n.jsx)("span",{className:"w-[25px] h-[25px] rounded-full outline-none absolute","data-dismiss":"modal","aria-label":"Close",children:(0,n.jsx)(U(),{src:{src:"/_next/static/media/IconClose.41d08d13.png",height:25,width:25,blurDataURL:"data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAgAAAAICAYAAADED76LAAAA20lEQVR42h2OTYrCUBCEe5gTDAzD3GNgbiWoyYvvRZMnagSzEnUfj6DLHMCFCmLQVRbZmCME/EPbaht6VfVVFSnXJfyf0Xplw/AeBsHZU2rR9v0fklNK/fd7vSoaDNh1nCfMHI9GDOPRN+abtNbrYRRxWZa36WTCaZpynufXZqPBXWtnJLFCilhVFZenE4N8oIKDTmdHiLpIrJAiFkXBSZI8Wp4nNRvCoGUcx+9YIecQsyy7eYCstT4ZY37hPDjolFghATGqF7V6/VMM8l8YNEbnHuYtRE1EH0REL9zak84bZcpxAAAAAElFTkSuQmCC",blurWidth:8,blurHeight:8},width:45,height:20,alt:"Icon Close",className:"w-[25px] h-[25px]"})}),z={inputProps:{"aria-label":"Checkbox"}};function W(e){var t;let{isOpen:s,onClose:l,tickets:r,concessions:c,placeOrder:m}=e,{t:u,lang:p}=(0,o.Z)(),{quote:v}=(0,i.bN)(),{movieData:f,cinemaData:g,sessionData:j}=v,b=d()(null===(t=v.sessionData)||void 0===t?void 0:t.showDate).locale(p),[y,N]=x.useState(!1),[k,A]=x.useState("");q()(v.seats,e=>e.ticketPrice),q()(c,e=>e.price*e.qty),v.discountAmount,v.loyaltyDiscount;let w=()=>{N(!y),A("")},S=()=>{if(!y){A(u("booking:msgConfirmOrder"));return}m(),l()};return(0,n.jsx)(Y.Z,{open:s,onClose:l,showCloseIcon:!0,closeIcon:Q,closeOnOverlayClick:!0,focusTrapped:!1,closeIconId:"custom__btn__icon-close-confirm",center:!0,classNames:{modal:"modal-sx m-0 bg-transparent shadow-none modal-confirm-order"},children:(0,n.jsxs)("div",{className:"py-5 px-6 modal-radius-10 bg-white",children:[(0,n.jsx)("h1",{className:"uppercase text-[16px] font-bold text-center mb-5",children:u("booking:inforBooking")}),(0,n.jsxs)("div",{children:[(0,n.jsxs)("div",{className:"flex gap-x-4 items-start",children:[(0,n.jsx)("p",{className:"text-[14px] font-bold flex-none w-[30px] py-4",children:u("common:movie")}),(0,n.jsxs)("div",{className:"border border-[#DCD8D8] flex-1 text-left p-4",children:[(0,n.jsx)("p",{className:"text-[16px] font-bold text-[#1353B4]",children:null==f?void 0:f.name}),(0,n.jsxs)("p",{className:"text-[14px] ",children:[(0,n.jsx)("span",{children:null==f?void 0:f.movieFormat}),"  ",(0,n.jsx)("span",{className:"ml-2",children:(0,n.jsx)(a.Z,{age:null==f?void 0:f.age})})]})]})]}),(0,n.jsxs)("div",{className:"flex gap-x-4 my-3 items-start",children:[(0,n.jsx)("p",{className:"text-[14px] font-bold flex-none w-[30px] py-4",children:u("common:cinema")}),(0,n.jsxs)("div",{className:"border border-[#DCD8D8] flex-1 text-left p-4",children:[(0,n.jsx)("p",{className:"text-[16px] font-bold text-[#1353B4]",children:null==g?void 0:g.name}),(0,n.jsxs)("p",{className:"text-[14px] font-bold capitalize",children:[null==j?void 0:j.showTime," - ",b.format("dddd, "),(0,n.jsx)("strong",{children:b.format("DD/MM/YYYY")})]})]})]}),(0,n.jsxs)("div",{className:"flex gap-x-4 my-3 items-center",children:[(0,n.jsx)("div",{className:"text-[14px] font-bold flex-none w-[30px]"}),(0,n.jsxs)("div",{className:"border border-[#DCD8D8] flex-1 text-left p-4",children:[(0,n.jsx)("p",{className:"text-[14px]",children:null==j?void 0:j.screenName}),h()(r,e=>(0,n.jsx)("div",{className:"flex justify-between text-[14px]",children:(0,n.jsxs)("div",{children:[(0,n.jsxs)("span",{children:[e.name," "]}),(0,n.jsx)("strong",{children:e.seats.join(", ")})]})},e.categoryCode)),c.length>0&&(0,n.jsx)("div",{children:h()(c,e=>(0,n.jsx)("div",{className:"flex justify-between text-sm",children:(0,n.jsxs)("span",{children:[(0,n.jsxs)("strong",{children:[e.qty,"x "]}),(0,n.jsx)("span",{children:e.name})]})},e.name))})]})]}),(0,n.jsxs)("div",{className:"flex gap-x-4 my-5 items-center",children:[(0,n.jsx)("p",{className:"text-[14px] font-bold flex-none w-[30px]",children:u("booking:totalPayment")}),(0,n.jsx)("div",{className:"flex-1 text-left px-4 py-2 bg-[#1353B4] text-white font-bold",children:(0,n.jsxs)("p",{children:[v.total.toLocaleString("vi-VN")," VNƒê"]})})]}),(0,n.jsx)("div",{className:"relative modal-ticket",children:(0,n.jsx)(U(),{src:J,width:45,height:1,alt:"Icon line",className:"w-full h-full"})}),(0,n.jsxs)("div",{className:"flex items-center mt-5",children:[(0,n.jsx)(U(),{src:_,width:45,height:20,alt:"Icon show",className:"w-[36px] h-[40px] flex-none"}),(0,n.jsx)("p",{className:"min-[412px]:text-[14px] text-[12px] flex-auto ml-1",children:(0,n.jsx)("i",{children:u("booking:accessConfirm")})}),(0,n.jsx)("div",{className:"flex-none w-[20px]",children:(0,n.jsx)(H.Z,{...z,checked:y,onChange:w,size:"small",sx:{"&.Mui-checked":{color:"#03AB00"}}})})]}),k&&(0,n.jsx)("p",{className:"text-[12px] text-red text-center my-2",children:k}),(0,n.jsx)("div",{className:"text-center mt-2",children:(0,n.jsx)("button",{className:"w-1/2 py-2  bg-primary text-white border rounded-md hover:bg-orange-20 mx-auto font-bold",onClick:S,children:u("booking:placeOrder")})})]})]})})}function K(e){let{isOpen:t,onClose:s,item:l,handleOk:a}=e,{t:i}=(0,o.Z)(j.C7.COMMON);return(0,n.jsxs)(Y.Z,{open:t,onClose:s,showCloseIcon:!1,center:!0,closeOnOverlayClick:!1,classNames:{modal:"modal-375 modal-315 p-0"},children:[(0,n.jsxs)("div",{className:"generic__modal-wrapper",children:[(0,n.jsxs)("div",{className:"py-3",children:[(0,n.jsx)("h3",{className:"text-center font-bold",children:l.title}),(0,n.jsx)("p",{className:"text-center font-bold text-sm",children:l.content})]}),(0,n.jsxs)("div",{children:[(0,n.jsx)(U(),{src:l.image,width:100,height:100,alt:l.title,className:"w-full h-full object-fill"}),(0,n.jsxs)("div",{className:"p-[15px]",children:[(0,n.jsx)("p",{className:"text-base font-semibold",children:l.name}),(0,n.jsx)("p",{className:"text-base text-gray-400",children:l.description}),(0,n.jsxs)("p",{className:"text-base",children:[(0,n.jsxs)("span",{children:[i("price"),": "]}),(0,n.jsx)("span",{className:"text-primary font-bold",children:E.lV.formatCurrencyVND(l.price)})]})]})]})]}),(0,n.jsxs)("div",{className:"flex",children:[(0,n.jsx)("button",{onClick:s,className:"flex-1 hover:bg-grey-80/20 transition-all duration-30 min-w-[135px] w-full focus:outline-none focus:ring-[#e38601]text-center inline-flex items-center dark:hover:bg-grey-80/20 dark:focus:ring-[#e38601] justify-center text-black bg-grey-80/20 h-10 px-5 py-2.5 text-sm capitalize",children:i("close")}),(0,n.jsx)("button",{onClick:a,className:"flex-1 hover:bg-[#e38601] transition-all duration-30 min-w-[135px] w-full focus:outline-none focus:ring-[#e38601]text-center inline-flex items-center dark:hover:bg-[#e38601] dark:focus:ring-[#e38601] justify-center text-white bg-primary h-10 px-5 py-2.5 text-sm capitalize",children:i("buyNow")})]})]})}let X=new N.n;function $(){var e,t,s,c,u,f,b,N,A,S,C;let{quote:Z,saveQuote:V,validQuote:M,member:L,validMember:B}=(0,i.bN)(),{activeStep:Y,isLoading:_,disableNextStep:J,setIsLoading:H,voucherGroups:Q,isValidSeats:z}=(0,r.Q)(),$=(0,I.useRouter)(),{t:ee,lang:et}=(0,o.Z)(),es=d()(null===(e=Z.sessionData)||void 0===e?void 0:e.showDate).locale(et),[en,el]=(0,x.useState)([]),[ea,ei]=(0,x.useState)([]),[er,eo]=(0,x.useState)([]),ec=x.useRef(null),[ed,em]=(0,x.useState)("max"),[ex,eu]=x.useState(!1),[eh,ep]=(0,x.useState)(!1),[ev,ef]=(0,x.useState)(null);(0,x.useEffect)(()=>{if(2===Y){let e=g()(null==Z?void 0:Z.seats,e=>e.type),t=h()(e,(e,t)=>{let s=0,n=[];return y()(e,e=>{s+=e.ticketPrice,0===e.seatsInGroup.length?n.push([e.rowName,e.id].join("")):y()(e.seatsInGroup,t=>{n.push([e.rowName,t.id].join(""))})}),{categoryCode:t,name:E.lV.getSeatTypeVietnameseName(+t),qty:e.length,seats:n,total:s}});el(t)}else el(Z.tickets)},[Z.seats,Y,Z.tickets]);let eg=()=>{if(Y>2){if(4===Y){eb();return}V({activeStep:Y-1});return}if(2===Y){if(M()){k.O2.emit("cancelOrder",Z.userSessionId);return}V({activeStep:Y-1}).then(()=>{$.push("/booking")})}1===Y&&$.push("/")},ej=()=>{if(!B()){k.GG.emit("openSignInModal");return}switch(Y){case 1:ek();break;case 2:eA();break;case 3:ew();break;case 4:eu(!0)}},eb=()=>{k.GG.emit("openConfirmModal",{header:(0,n.jsx)(n.Fragment,{children:(0,n.jsxs)("div",{className:"text-center py-2",children:[(0,n.jsx)(p.G,{icon:v.ik8,className:"text-[40px] text-yellow-400"}),(0,n.jsx)("h4",{className:"mt-4 font-semibold text-center text-xl",children:ee("common:warning")})]})}),content:(0,n.jsx)(n.Fragment,{children:(0,n.jsx)("p",{className:"mt-4 text-center",children:ee("booking:confirmClearVoucher")})}),onConfirm:()=>{V({activeStep:Y-1}),k.O2.emit("clearPoint"),k.O2.emit("clearVouchers")}})},ey=()=>{var e;let t=null===(e=Z.cinemaData)||void 0===e?void 0:e.id;return H(!0),X.createOrder(t).finally(()=>H(!1)).then(e=>e.ok?e.data:Promise.reject(e.data)).then(e=>{let t=d()().add(e.data.expiredTime,"seconds").toDate();return V({userSessionId:e.data.orderId,expiredAt:t})}).catch(e=>{var t;return k.GG.emit("openAlertModal",{msg:null==e?void 0:null===(t=e.data)||void 0===t?void 0:t.message})})},eN=(e,t)=>{var s;let n=[];y()(Z.seats,e=>{0===e.seatsInGroup.length?n.push(w()(e,["area","row","column"])):y()(e.seatsInGroup,e=>n.push(w()(e,["area","row","column"])))});let l=t?[{ticketTypeCode:null==ev?void 0:ev.ticketTypeCode,price:null==ev?void 0:ev.price,quantity:null==ev?void 0:ev.quantity}]:[],a={orderId:e,sessionId:null===(s=Z.sessionData)||void 0===s?void 0:s.id,seats:n,packages:l};return H(!0),X.seatSeats(a).finally(()=>H(!1)).then(e=>e.ok?e.data:Promise.reject(e.data)).then(()=>(k.O2.emit("refreshSummary"),V({activeStep:Y+1}))).catch(e=>{var t;return k.GG.emit("openAlertModal",{msg:null==e?void 0:null===(t=e.data)||void 0===t?void 0:t.message})})},ek=()=>{if(!B()){k.GG.emit("openSignInModal");return}V({activeStep:Y+1}).then(()=>{var e;return $.push("/booking/".concat(null===(e=Z.movieData)||void 0===e?void 0:e.slug))})},eA=()=>{var e,t,s;if(!(null===(e=Z.seats)||void 0===e?void 0:e.length)){k.GG.emit("openAlertModal",{msg:ee("booking:pleaseSelectSeat")});return}if(!z()){k.GG.emit("openAlertModal",{msg:ee("booking:validSelectSeat")});return}if(!M()){if(Z.seats.length>=2&&(null==Z?void 0:Z.packages)&&(null==Z?void 0:null===(s=Z.packages)||void 0===s?void 0:s.length)>0){let e=Z.packages.map(e=>e.quantity),t=Math.max(...e),s=Z.seats.length;if(s>=t){let e=Z.packages.find(e=>e.quantity===t);ef(e)}else{let e=Z.packages.find(e=>e.quantity===s);ef(e)}ep(!0);return}ey().then(e=>eN(e.userSessionId,!1));return}if(Z.seats.length>=2&&(null==Z?void 0:Z.packages)&&(null==Z?void 0:null===(t=Z.packages)||void 0===t?void 0:t.length)>0){let e=Z.packages.map(e=>e.quantity),t=Math.max(...e),s=Z.seats.length;if(s>=t){let e=Z.packages.find(e=>e.quantity===t);ef(e)}else{let e=Z.packages.find(e=>e.quantity===s);ef(e)}ep(!0);return}return eN(Z.userSessionId,!1)},ew=()=>{var e;let t=null===(e=Z.movieData)||void 0===e?void 0:e.age;if(!t||""===t||"0"===t)return eS();k.GG.emit("openConfirmModal",{header:(0,n.jsx)(n.Fragment,{children:(0,n.jsxs)("div",{className:"text-center",children:[(0,n.jsx)(a.Z,{age:t}),(0,n.jsx)("h4",{className:"mt-4 font-semibold text-xl",children:ee("booking:confirmAgeRating")})]})}),content:(0,n.jsx)(n.Fragment,{children:(0,n.jsx)("div",{className:"text-center text-sm",children:ee("booking:confirmAgeContent"+t)})}),onConfirm:()=>{eS()}})},eS=()=>{var e;let t=T.Z.get(j.l0.barcode),s=h()(Z.concessions,e=>({itemId:e.itemId,quantity:e.qty})),n={orderId:Z.userSessionId,sessionId:null===(e=Z.sessionData)||void 0===e?void 0:e.id,concessions:s};H(!0),t?(V({...Z,barcodes:t?[t]:[]}),eC(t,n)):eG(n)},eC=(e,t)=>{X.applyVoucher(Z.userSessionId,e).finally(()=>{eG(t),k.GG.emit("processStop")}).then(e=>e.ok?e.data:Promise.reject(e.data)).then(()=>{k.GG.emit("openAlertModal",{msg:ee("booking:applyVoucherSuccess")})}).catch(e=>{var t;return k.GG.emit("openAlertModal",{msg:null==e?void 0:null===(t=e.data)||void 0===t?void 0:t.message})})},eG=e=>{X.seatConcessions(e).finally(()=>H(!1)).then(e=>e.ok?e.data:Promise.reject(e.data)).then(e=>V({activeStep:Y+1})).catch(e=>{var t;return k.GG.emit("openAlertModal",{msg:null==e?void 0:null===(t=e.data)||void 0===t?void 0:t.message})})},eD=()=>{let e={orderId:Z.userSessionId,methodId:Z.paymentMethod,fullName:L.name,phone:L.phone,email:L.email,successRedirectUrl:j.EZ.URL_SUCCESS,errorRedirectUrl:j.EZ.URL_ERROR};H(!0),X.placeOrder(e).then(e=>e.ok?e.data:Promise.reject(e.data)).then(e=>{var t,s;(null==e?void 0:null===(t=e.data)||void 0===t?void 0:t.statusCode)===1?$.replace("".concat(e.data.url)):(null==e?void 0:null===(s=e.data)||void 0===s?void 0:s.statusCode)===2&&$.push("/dat-ve-thanh-cong")}).catch(e=>{var t;H(!1),k.GG.emit("openAlertModal",{msg:null==e?void 0:null===(t=e.data)||void 0===t?void 0:t.message})})},eI=e=>{k.O2.emit("removeVoucher",e),ec.current&&em("".concat(ec.current.scrollHeight-20,"px"))};(0,x.useEffect)(()=>{let e=h()(null==Z?void 0:Z.concessions,e=>({name:e.name,price:e.price,qty:e.qty,total:e.qty*e.price,id:e.id}));ei(e)},[Z.concessions]),(0,x.useEffect)(()=>{let e=[];y()(Q,t=>{y()(t.items,t=>e.push(t))}),eo(e)},[Q]);let eZ=e=>{let t=[...Z.concessions],s=P()(t,t=>t.id!==e);V({...Z,concessions:s}),ec.current&&em("".concat(ec.current.scrollHeight-27,"px"))},eO=()=>{"max"===ed?em("[110px]"):em("max")},eV=()=>{if(ep(!1),V({isPackage:!0,packageSelect:{...ev}}),Z.userSessionId)return eN(Z.userSessionId,!0);ey().then(e=>eN(e.userSessionId,!0))},eP=()=>{if(ep(!1),ef(null),V({isPackage:!1,packageSelect:null}),Z.userSessionId)return eN(Z.userSessionId,!1);ey().then(e=>eN(e.userSessionId,!1))},eE=(0,n.jsxs)("div",{ref:ec,className:"fixed bottom-0 left-0 w-full z-100 bg-white xl:hidden transition-all duration-500 ease-in-out overflow-hidden max-h-[90vh] h-".concat(ed,"  min-h-").concat(ed," pb-12 pt-2 border border-[#DFDFDF] rounded-t-xl ").concat((null==Z?void 0:Z.sessionData)?"opacity-100":"opacity-0"),children:[(0,n.jsx)("div",{className:"rounded opacity-100  w-full",onClick:eO,children:(0,n.jsx)(U(),{src:F,width:45,height:20,alt:"Icon show",className:"absolute -top-[6%] left-[50%] -translate-x-[50%] brightness-90 grayscale-[20%] z-100"})}),(0,n.jsxs)("div",{className:R()({"grid grid-cols-3 items-center px-4 mb-2 transition opacity-0 relative overflow-hidden":!0," opacity-100":null==Z?void 0:Z.sessionData}),children:[(0,n.jsxs)("div",{className:"col-span-3",children:[en.length>0&&(0,n.jsx)("div",{className:"",children:h()(en,e=>(0,n.jsxs)("div",{className:"flex justify-between text-sm mt-2",children:[(0,n.jsxs)("div",{children:[(0,n.jsxs)("strong",{children:[e.qty,"x "]}),(0,n.jsx)("span",{children:e.name}),(0,n.jsxs)("div",{children:[(0,n.jsxs)("span",{children:[ee("booking:seat"),": "]}),(0,n.jsx)("strong",{children:e.seats.join(", ")})]})]}),(0,n.jsx)(m.Z,{value:e.total})]},e.categoryCode))}),ea.length>0&&(0,n.jsx)("div",{children:h()(ea,e=>(0,n.jsxs)("div",{className:"relative flex justify-between items-start text-sm",children:[(0,n.jsx)("button",{className:"flex-none mr-2 text-right",children:(0,n.jsx)(p.G,{icon:v.$aW,className:"inline-block text-lg cursor-pointer text-sm",onClick:()=>eZ(e.id)})}),(0,n.jsxs)("span",{className:"flex-1",children:[(0,n.jsxs)("strong",{children:[e.qty,"x "]}),(0,n.jsx)("span",{children:e.name})]}),(0,n.jsx)(m.Z,{value:e.total})]},e.name))}),Z.barcodes.length>0&&(0,n.jsxs)(n.Fragment,{children:[(0,n.jsx)("h4",{className:"text-sm font-semibold",children:ee("booking:listVoucherApplied")}),(0,n.jsx)("ul",{className:"mt-2 text-sm pl-0",children:h()(Z.barcodes,e=>{let t=O()(er,t=>t.barcode===e);return(0,n.jsxs)("li",{className:"flex justify-between pl-0 pb-2",children:[(0,n.jsxs)("div",{children:[(0,n.jsx)(p.G,{icon:v.$aW,className:"inline-block text-lg mr-2 cursor-pointer text-sm",onClick:()=>eI(e)}),(0,n.jsx)("span",{children:(null==t?void 0:t.name)||e})]}),(0,n.jsx)("div",{children:(null==t?void 0:t.value)>0&&(0,n.jsx)(n.Fragment,{children:(0,n.jsx)(m.Z,{value:null==t?void 0:t.value})})})]},e)})})]}),Z.discountAmount>0&&(0,n.jsx)(n.Fragment,{children:(0,n.jsxs)("div",{className:"flex justify-between mb-2",children:[(0,n.jsx)("span",{children:ee("booking:giftVoucher")}),(0,n.jsx)(m.Z,{value:Z.discountAmount,className:"text-red-20"})]})}),Z.loyaltyDiscount>0&&(0,n.jsx)(n.Fragment,{children:(0,n.jsxs)("div",{className:"flex justify-between mb-2",children:[(0,n.jsx)("span",{children:ee("booking:starsPoint")}),(0,n.jsx)(m.Z,{value:Z.loyaltyDiscount,className:"text-red-20"})]})})]}),(0,n.jsxs)("div",{className:"fixed bottom-0 ",children:[(0,n.jsxs)("div",{className:"justify-start  items-center gap-1 flex col-span-2 w-full h-14   fixed bottom-0 left-4 bg-white",children:[(0,n.jsxs)("strong",{className:"text-sm font-normal text-grey-10",children:[ee("booking:total"),":"," "]}),(null==Z?void 0:Z.activeStep)<4?(0,n.jsx)(m.Z,{value:q()(Z.seats,e=>e.ticketPrice)+q()(ea,e=>e.price*e.qty)-Z.discountAmount-Z.loyaltyDiscount||0,primary:!0}):(0,n.jsx)(m.Z,{value:Z.total,primary:!0})]}),(0,n.jsx)("div",{className:"text-right fixed bottom-0 right-4 h-14 flex items-center",children:Y<5&&(0,n.jsxs)("div",{children:[(0,n.jsx)("button",{className:"w-[65px] h-10 py-2 bg-transparent text-primary text-sm rounded-md",onClick:eg,disabled:Y<1||_,children:(0,n.jsx)("span",{children:ee("booking:back")})}),(0,n.jsx)("button",{className:"w-[80px] h-10 py-2 bg-primary text-white border text-sm rounded-md hover:bg-orange-20 ".concat(4===Y?"w-[101px]":"w-[80px]"),disabled:Y>=5||_||J,onClick:ej,children:_?(0,n.jsx)(p.G,{icon:v.LM3,flip:"vertical",spin:!0,className:"text-lg"}):(0,n.jsx)("span",{children:4===Y?ee("booking:placeOrder"):ee("booking:continue")})})]})})]})]})]});return(0,n.jsxs)(n.Fragment,{children:[(0,n.jsxs)("div",{className:"booking__summary md:mb-4",children:[M()&&(0,n.jsx)(G,{}),(0,n.jsx)("div",{className:"h-[6px] bg-primary rounded-t-lg"}),(0,n.jsxs)("div",{className:"bg-white p-4 grid grid-cols-3 xl:gap-2 items-center",children:[(0,n.jsx)("div",{className:"row-span-2 md:row-span-1 xl:row-span-2 block md:hidden xl:block",children:(0,n.jsx)(l.Z,{src:(null==Z?void 0:null===(t=Z.movieData)||void 0===t?void 0:t.imagePortrait)||D.Z,alt:(null==Z?void 0:null===(s=Z.movieData)||void 0===s?void 0:s.name)||"",width:100,height:150,className:"xl:w-full xl:h-full md:w-[80px] md:h-[120px] w-[90px] h-[110px] rounded object-cover"})}),(0,n.jsx)("div",{className:"row-span-2 md:row-span-1 xl:row-span-2 hidden md:block xl:hidden",children:(0,n.jsx)(l.Z,{src:(null==Z?void 0:null===(c=Z.movieData)||void 0===c?void 0:c.imageLandscape)||D.Z,alt:(null==Z?void 0:null===(u=Z.movieData)||void 0===u?void 0:u.name)||"",width:100,height:150,className:" w-[220px] h-[150px] rounded object-cover"})}),(0,n.jsxs)("div",{className:"flex-1 col-span-2 md:col-span-1 row-span-1 xl:col-span-2",children:[(0,n.jsx)("h3",{className:"text-sm xl:text-base font-bold xl:mb-2 ",children:null==Z?void 0:null===(f=Z.movieData)||void 0===f?void 0:f.name}),(0,n.jsx)("p",{className:"text-sm inline-block",children:null==Z?void 0:null===(b=Z.movieData)||void 0===b?void 0:b.movieFormat}),(0,n.jsx)("span",{children:" - "}),(0,n.jsx)("div",{className:"xl:mt-2 ml-2 xl:ml-0 inline-block",children:(0,n.jsx)(a.Z,{age:null==Z?void 0:null===(N=Z.movieData)||void 0===N?void 0:N.age})})]}),(0,n.jsxs)("div",{className:"col-span-2 md:col-span-1 xl:col-span-3",children:[(null==Z?void 0:Z.sessionData)&&(0,n.jsxs)("div",{children:[(0,n.jsxs)("div",{className:"xl:mt-4 text-sm xl:text-base",children:[(0,n.jsx)("strong",{children:null==Z?void 0:null===(A=Z.cinemaData)||void 0===A?void 0:A.name}),(0,n.jsx)("span",{children:" - "}),(0,n.jsx)("span",{className:"text-sm xl:text-base",children:null==Z?void 0:null===(S=Z.sessionData)||void 0===S?void 0:S.screenName})]}),(0,n.jsxs)("div",{className:"xl:mt-2 text-sm xl:text-base",children:[(0,n.jsxs)("span",{children:[ee("booking:session"),": "]}),(0,n.jsx)("strong",{children:null==Z?void 0:null===(C=Z.sessionData)||void 0===C?void 0:C.showTime}),(0,n.jsx)("span",{children:" - "}),(0,n.jsxs)("span",{className:"capitalize text-sm",children:[es.format("dddd, "),(0,n.jsx)("strong",{children:es.format("DD/MM/YYYY")})]})]})]}),en.length>0&&(0,n.jsxs)("div",{className:"xl:block hidden",children:[(0,n.jsx)("div",{className:"my-4 border-t border-grey-60 border-dashed xl:block hidden"}),h()(en,e=>(0,n.jsxs)("div",{className:"flex justify-between text-sm mt-2",children:[(0,n.jsxs)("div",{children:[(0,n.jsxs)("strong",{children:[e.qty,"x "]}),(0,n.jsx)("span",{children:e.name}),(0,n.jsxs)("div",{children:[(0,n.jsxs)("span",{children:[ee("booking:seat"),": "]}),(0,n.jsx)("strong",{children:e.seats.join(", ")})]})]}),(0,n.jsx)(m.Z,{value:e.total})]},e.categoryCode))]}),ea.length>0&&(0,n.jsxs)("div",{className:"xl:block hidden",children:[(0,n.jsx)("div",{className:"my-4 border-t border-grey-60 border-dashed xl:block hidden"}),h()(ea,e=>(0,n.jsxs)("div",{className:"flex justify-between text-sm",children:[(0,n.jsxs)("span",{children:[(0,n.jsxs)("strong",{children:[e.qty,"x "]}),(0,n.jsx)("span",{children:e.name})]}),(0,n.jsx)(m.Z,{value:e.total})]},e.name))]}),(0,n.jsx)("div",{className:"my-4 border-t border-grey-60 border-dashed xl:block hidden"})]}),Z.barcodes.length>0&&(0,n.jsxs)("div",{className:"xl:block hidden col-span-3",children:[(0,n.jsx)("h4",{className:"text-sm font-semibold col-span-3",children:ee("booking:listVoucherApplied")}),(0,n.jsx)("ul",{className:"mt-2 xl:col-span-3 text-sm pl-0",children:h()(Z.barcodes,e=>{let t=O()(er,t=>t.barcode===e);return(0,n.jsxs)("li",{className:"flex justify-between pl-0 pb-2",children:[(0,n.jsxs)("div",{children:[(0,n.jsx)(p.G,{icon:v.$aW,className:"inline-block text-lg mr-2 cursor-pointer",onClick:()=>eI(e)}),(0,n.jsx)("span",{children:(null==t?void 0:t.name)||e})]}),(0,n.jsx)("div",{children:(null==t?void 0:t.value)>0&&(0,n.jsx)(n.Fragment,{children:(0,n.jsx)(m.Z,{value:null==t?void 0:t.value})})})]},e)})}),(0,n.jsx)("div",{className:"my-2 border-t border-grey-60 border-dashed block col-span-3"})]}),Z.discountAmount>0&&(0,n.jsx)("div",{className:"xl:block hidden col-span-3",children:(0,n.jsxs)("div",{className:"xl:flex hidden justify-between mb-2 col-span-3",children:[(0,n.jsx)("span",{children:ee("booking:giftVoucher")}),(0,n.jsx)(m.Z,{value:Z.discountAmount,className:"text-red-20"})]})}),Z.loyaltyDiscount>0&&(0,n.jsx)("div",{className:"xl:block hidden col-span-3",children:(0,n.jsxs)("div",{className:"xl:flex hidden justify-between mb-2 col-span-3",children:[(0,n.jsx)("span",{children:ee("booking:starsPoint")}),(0,n.jsx)(m.Z,{value:Z.loyaltyDiscount,className:"text-red-20"})]})}),(0,n.jsxs)("div",{className:"xl:flex hidden justify-between col-span-3",children:[(0,n.jsx)("strong",{className:"text-base",children:ee("booking:total")}),(null==Z?void 0:Z.activeStep)===2?(0,n.jsx)(m.Z,{value:q()(Z.seats,e=>e.ticketPrice)+q()(ea,e=>e.price*e.qty)-Z.discountAmount-Z.loyaltyDiscount||0,primary:!0}):(0,n.jsx)(m.Z,{value:Z.total,primary:!0})]})]}),Y<5&&(0,n.jsxs)("div",{className:"mt-8 xl:flex hidden",children:[(0,n.jsx)("button",{className:"w-1/2 mr-2 py-2 text-primary",onClick:eg,disabled:Y<1||_,children:(0,n.jsx)("span",{children:ee("booking:back")})}),(0,n.jsx)("button",{className:"w-1/2 ml-2 py-2  bg-primary text-white border rounded-md hover:bg-orange-20",disabled:Y>=5||_||J,onClick:ej,children:_?(0,n.jsx)(p.G,{icon:v.LM3,flip:"vertical",spin:!0,className:"text-lg"}):(0,n.jsx)("span",{children:4===Y?ee("booking:placeOrder"):ee("booking:continue")})})]})]}),eE,(0,n.jsx)(W,{isOpen:ex,onClose:()=>eu(!1),tickets:en,concessions:ea,placeOrder:eD}),ev&&Object.entries(ev).length&&(0,n.jsx)(K,{isOpen:eh,onClose:eP,item:ev,handleOk:eV})]})}},47136:function(e,t,s){s.d(t,{Z:function(){return m}});var n=s(36734);s(51776);var l=s(94195),a=s.n(l),i=s(86880),r=s(4164),o=s(27280),c=s.n(o),d=s(33906);function m(){let{t:e}=(0,i.Z)(),{activeStep:t}=(0,r.Q)();(0,d.useRouter)();let s=[{id:"session",order:1,name:e("booking:stepSession")},{id:"seat",order:2,name:e("booking:stepSeat")},{id:"concession",order:3,name:e("booking:stepConcession")},{id:"payment",order:4,name:e("booking:stepPayment")},{id:"confirm",order:5,name:e("booking:stepConfirm")}],l=e=>{};return(0,n.jsx)(n.Fragment,{children:(0,n.jsx)("div",{className:"booking__progress-bar flex justify-center items-center flex-nowrap bg-white relative md:mb-8 mb-0 w-full overflow-auto",children:(0,n.jsx)("ul",{className:"flex  justify-center items-center text-grey-20 md:text-base text-[12px] font-semibold w-full flex-nowrap",children:a()(s,e=>(0,n.jsxs)("li",{className:c()({"pt-4 mb-4 pl-0":!0,"text-blue-10":t===e.order,"text-blue-20":t>e.order}),children:[(0,n.jsx)("button",{className:c()({"md:mx-3 mx-1":!0,"ml-0":1===e.order,"mr-0":5===e.order}),onClick:()=>{l(e.order)},children:e.name}),(0,n.jsx)("div",{className:c()({"relative mt-4 h-[2px]":!0,"before:inline-block before:w-full before:absolute before:left-0 before:h-[2px] before:bg-grey-30":!0,"after:inline-block after:absolute after:left-0 after:h-[2px] after:bg-blue-10":t>=e.order,"after:w-1/2":t===e.order,"after:w-full":t>=e.order})})]},e.id))})})})}},25404:function(e,t,s){s.d(t,{Z:function(){return i}});var n=s(36734),l=s(27280),a=s.n(l);function i(e){let t=parseFloat(e.value),s={"inline-block font-bold":!0,"text-primary":e.primary};return s[e.className||""]=!0,(0,n.jsx)(n.Fragment,{children:(0,n.jsx)("span",{className:a()(s),children:t.toLocaleString("vi-VN",{style:"currency",currency:"VND"})})})}},44234:function(e,t,s){s.d(t,{Z:function(){return a}});var n=s(36734),l=s(56683);function a(e){let{age:t}=e,s=l.lV.getAllowedType(t);return(0,n.jsx)(n.Fragment,{children:s&&(0,n.jsx)("span",{className:"inline-flex items-center justify-center w-[38px] h-7 bg-primary rounded text-sm text-center text-white font-bold not-italic",children:s})})}s(51776)},4164:function(e,t,s){s.d(t,{Q:function(){return I},v:function(){return D}});var n=s(36734),l=s(51776),a=s(12792),i=s(42072),r=s(31720),o=s(37654),c=s.n(o),d=s(94195),m=s.n(d),x=s(5888),u=s.n(x),h=s(34904),p=s.n(h),v=s(44155),f=s.n(v),g=s(65174),j=s(86880),b=s(78204),y=s(11804),N=s.n(y),k=s(28176),A=s.n(k),w=s(56683);let S=l.createContext({sessions:[],voucherGroups:[],activeStep:1,isLoading:!1,disableNextStep:!1,loyaltyNote:"",seatLayout:null,isValidSeats:()=>!1,setSessions:()=>{},setActiveStep:()=>{},setIsLoading:()=>{},setDisableNextStep:()=>{},setSeatLayout:()=>{}}),C=new r.n,G=new g.I,D=e=>{let{t}=(0,j.Z)(),[s,r]=l.useState([]),[o,d]=l.useState([]),[x,h]=l.useState(1),[v,g]=l.useState(!1),[y,k]=l.useState(!1),[D,I]=l.useState(null),[Z,O]=l.useState(""),{quote:V,saveQuote:P}=(0,a.bN)(),E=()=>{let e=!0,t=(0,b.m6)(D);if((null==t?void 0:t.length)<6)return!0;let{maxColumn:s}=D;return f()(V.seats,n=>{if(!e||w.lV.isSeatCouple(null==n?void 0:n.type)||w.lV.isSeatTriple(null==n?void 0:n.type)||w.lV.isSeatBed(null==n?void 0:n.type))return;let l=N()(t,e=>e.index===n.row),a=l.seats,i=a.filter(e=>1===e.status),r=0,o=0;if(i&&i.length>0){let t=[...i,...V.seats],s=A()(t,["column"],["asc"]),n=function(e){for(let t=0;t<e.length;t++)for(let s=t+1;s<e.length;s++){if(2===Math.abs(e[t].column-e[s].column))return!0;t++}return!1}(s);if(n){e=!1;return}}else f()(a,t=>{if(0===n.column||n.column===s-1||t.column===n.column)return;let l=N()(V.seats,e=>e.area===t.area&&e.row===t.row&&e.column===t.column)||1===t.status;if(t.column>n.column){if((l||(0,b.fJ)(t))&&1===o){e=!1;return}if(l){o=0;return}if((0,b.fJ)(t))return;o++}else{if(l||(0,b.fJ)(t)){r=0;return}r++}});(1===r||1===o)&&(e=!1)}),e};return l.useEffect(()=>{(null==V?void 0:V.activeStep)&&h(parseInt(V.activeStep))},[null==V?void 0:V.activeStep]),l.useEffect(()=>{let e=i.O2.on("refreshSummary",()=>{i.GG.emit("processStart"),C.getOrderSummary(V.userSessionId).finally(()=>i.GG.emit("processStop")).then(e=>e.ok?e.data:Promise.reject(e.data)).then(e=>{var t;let s=c()(null==e?void 0:null===(t=e.data)||void 0===t?void 0:t.tickets,e=>e.ticketTypeCode),n=m()(s,e=>{let t=[];return f()(e,e=>{t.push(...e.seats)}),{categoryCode:u()(e,"0.ticketTypeCode"),name:u()(e,"0.description"),qty:e.length,price:u()(e,"0.price"),total:p()(e,e=>e.price),seats:t}});P({tickets:n,discountAmount:(null==e?void 0:e.data.discountAmount)||0,loyaltyPoint:(null==e?void 0:e.data.loyaltyPoint)||0,loyaltyDiscount:(null==e?void 0:e.data.loyaltyDiscount)||0,totalPoints:(null==e?void 0:e.data.totalPoints)||0,barcodes:(null==e?void 0:e.data.barcodes)||[]}),O((null==e?void 0:e.data.loyaltyText)||"")})}),t=i.O2.on("removeVoucher",e=>{i.GG.emit("processStart"),C.removeVoucher(V.userSessionId,e).finally(()=>i.GG.emit("processStop")).then(e=>e.ok?e.data:Promise.reject(e.data)).then(e=>{i.O2.emit("refreshSummary")})}),s=i.O2.on("clearVouchers",()=>{i.GG.emit("processStart"),C.clearVouchers(V.userSessionId).finally(()=>i.GG.emit("processStop")).then(e=>e.ok?e.data:Promise.reject(e.data)).then(e=>{i.O2.emit("refreshSummary")})});return()=>{e(),t(),s()}},[V.userSessionId]),l.useEffect(()=>{let e=i.O2.on("getVouchers",()=>{G.getVouchers().then(e=>e.ok?e.data:Promise.reject(e.data)).then(e=>{var t;d((null==e?void 0:null===(t=e.data)||void 0===t?void 0:t.result)||[])})}),s=i.O2.on("applyPoint",e=>{i.GG.emit("processStart"),C.applyPoint(e).finally(()=>i.GG.emit("processStop")).then(e=>e.ok?e.data:Promise.reject(e.data)).then(()=>{i.GG.emit("openAlertModal",{msg:t("booking:applyPointSuccess")}),i.O2.emit("refreshSummary")}).catch(e=>{var t;i.GG.emit("openAlertModal",{msg:null==e?void 0:null===(t=e.data)||void 0===t?void 0:t.message})})}),n=i.O2.on("clearPoint",()=>{i.GG.emit("processStart"),C.clearPoint().finally(()=>i.GG.emit("processStop")).then(e=>e.ok?e.data:Promise.reject(e.data)).then(()=>{i.O2.emit("refreshSummary")}).catch(e=>{var t;return i.GG.emit("openAlertModal",null==e?void 0:null===(t=e.data)||void 0===t?void 0:t.message)})});return()=>{e(),s(),n()}},[]),(0,n.jsx)(S.Provider,{value:{sessions:s,voucherGroups:o,activeStep:x,isLoading:v,disableNextStep:y,loyaltyNote:Z,seatLayout:D,isValidSeats:E,setSessions:r,setActiveStep:h,setIsLoading:g,setDisableNextStep:k,setSeatLayout:I},children:e.children})},I=()=>l.useContext(S)},85822:function(e,t,s){s.d(t,{s:function(){return l}});var n=s(51776);let l=()=>{let[e,t]=(0,n.useState)(!1);return(0,n.useEffect)(()=>{t(!0)},[]),{hasMounted:e}}},75141:function(e,t,s){s.d(t,{Bu:function(){return o},Gr:function(){return d},Vt:function(){return c}});var n=s(8497),l=s.n(n),a=s(88910),i=s(88108),r=s.n(i);let o=(e,t)=>String(e).padStart(t,"0"),c=e=>String(e).replace(/(<([^>]+)>)/ig,""),d=e=>{let t=l()(a.EZ.BASE_URL,"/");return[t,e=r()(e,"/")].join("/")}}}]);